# 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト基本情報

| 項目 | 内容 |
|------|------|
| **プロジェクト名** | helloprojects |
| **正式名称** | ハロープロジェクト総合ファンポータルサイト |
| **プロジェクトコード** | HP-PORTAL-2026 |
| **作成日** | 2026-01-14 |
| **バージョン** | 1.0.0 |

### 1.2 プロジェクトの目的

本プロジェクトは、ハロープロジェクト（Hello! Project）の総合ファンポータルサイトを構築し、既存ファン（コア層）と新規ファン（ライト層）の両方に対して、統合的な情報提供とファンコミュニティ体験を提供することを目的とします。

### 1.3 ターゲットユーザー

#### 1.3.1 プライマリターゲット
- **既存ファン（コア層）**
  - ハロープロジェクトを長年応援しているファン
  - 複数グループ、歴史的なグループに関する深い知識を持つ
  - 詳細な情報、アーカイブ、スケジュール管理機能を求める

#### 1.3.2 セカンダリターゲット
- **新規ファン（ライト層）**
  - 最近ハロープロジェクトに興味を持ち始めたファン
  - グループやメンバーの基本情報を求める
  - わかりやすく、視覚的に魅力的なUIを求める

### 1.4 プロジェクトスコープ

#### 1.4.1 範囲内
- ニュース・お知らせの配信
- 全グループ・全メンバーのプロフィール情報
- イベント・スケジュール管理
- 高度な検索・フィルタリング機能
- レスポンシブWebデザイン

#### 1.4.2 範囲外（将来の拡張候補）
- ファンクラブ機能（会員制）
- ユーザー生成コンテンツ（UGC）
- EC機能（グッズ販売）
- 動画配信プラットフォーム機能

---

## 2. 機能要件

### 2.1 必須機能（MVP: Minimum Viable Product）

#### 2.1.1 ニュース・お知らせ機能

**FR-001: ニュース一覧表示**
- **優先度**: 高
- **説明**: 最新のニュース・お知らせを時系列で表示
- **詳細要件**:
  - ニュース記事の一覧表示（タイトル、日付、サムネイル画像、カテゴリ）
  - ページネーション機能（1ページあたり20件）
  - カテゴリフィルタリング（イベント、リリース、メディア出演、その他）
  - 日付範囲フィルタリング
  - グループ別フィルタリング

**FR-002: ニュース詳細表示**
- **優先度**: 高
- **説明**: 選択したニュースの詳細情報を表示
- **詳細要件**:
  - タイトル、本文、投稿日時、更新日時
  - 関連画像ギャラリー
  - 関連グループ・メンバーへのリンク
  - ソーシャルシェア機能（Twitter、LINE、Facebook）
  - 関連記事の表示

#### 2.1.2 メンバープロフィール機能

**FR-003: メンバー一覧表示**
- **優先度**: 高
- **説明**: 全グループ・全時代のメンバー情報を表示
- **詳細要件**:
  - グリッドレイアウトでメンバー一覧表示
  - グループ別フィルタリング（現役/OG切り替え可能）
  - 加入日順・五十音順ソート機能
  - 在籍状況フィルタ（現役、卒業、研修生）
  - サムネイル画像、名前、所属グループ、ニックネーム表示

**FR-004: メンバー詳細プロフィール**
- **優先度**: 高
- **説明**: 個別メンバーの詳細情報を表示
- **詳細要件**:
  - プロフィール写真
  - 基本情報（生年月日、血液型、出身地、身長、趣味、特技）
  - 加入日、卒業日（該当する場合）
  - 所属グループ履歴
  - 主な活動履歴・実績
  - 関連ニュース一覧

#### 2.1.3 スケジュール・イベント機能

**FR-005: イベントカレンダー表示**
- **優先度**: 高
- **説明**: 月次カレンダー形式でイベント・スケジュールを表示
- **詳細要件**:
  - 月次カレンダービュー
  - 日付ごとにイベントを表示（最大3件まで、それ以上は「+N件」表示）
  - グループ別色分け表示
  - 当日・今後のイベントをハイライト
  - 前月・次月への移動

**FR-006: イベントタイムライン表示**
- **優先度**: 高
- **説明**: 時系列リスト形式でイベント・スケジュールを表示
- **詳細要件**:
  - 日付順のタイムライン形式
  - イベント名、日時、場所、グループ情報
  - グループ別フィルタリング
  - イベントタイプフィルタリング（ライブ、握手会、リリースイベント、TV出演、ラジオ出演）
  - 過去・未来の切り替え

**FR-007: イベント詳細表示**
- **優先度**: 中
- **説明**: 個別イベントの詳細情報を表示
- **詳細要件**:
  - イベント名、日時、場所、会場地図
  - 出演グループ・メンバー
  - チケット情報・リンク
  - イベント詳細説明
  - カレンダー追加機能（.ics ダウンロード）

#### 2.1.4 検索機能

**FR-008: 統合検索機能**
- **優先度**: 高
- **説明**: サイト全体を対象とした高度な検索機能
- **詳細要件**:
  - キーワード検索（部分一致）
  - 検索対象選択（ニュース、メンバー、イベント、全て）
  - 複数フィルター条件の組み合わせ
    - グループ指定（複数選択可）
    - 日付範囲指定
    - カテゴリ指定
  - ソート順の選択（関連度、日付順、五十音順）
  - 検索結果のページネーション
  - 検索履歴の保存（ローカルストレージ）

#### 2.1.5 グループ情報機能

**FR-009: グループ一覧表示**
- **優先度**: 中
- **説明**: ハロープロジェクト全グループの情報を表示
- **詳細要件**:
  - 現役グループと解散・休止グループの分類表示
  - グループ名、結成日、メンバー数、グループ画像
  - グループステータス（現役、解散、休止）
  - 五十音順・結成日順ソート

**FR-010: グループ詳細表示**
- **優先度**: 中
- **説明**: 個別グループの詳細情報を表示
- **詳細要件**:
  - グループ名、結成日、解散日（該当する場合）
  - グループコンセプト・紹介文
  - 現在のメンバー一覧
  - 歴代メンバー一覧
  - ディスコグラフィー（シングル、アルバム）
  - 関連ニュース一覧
  - 公式サイト・SNSへのリンク

#### 2.1.6 ナビゲーション・共通機能

**FR-011: グローバルナビゲーション**
- **優先度**: 高
- **説明**: サイト全体の主要ページへのアクセス
- **詳細要件**:
  - トップページ
  - ニュース
  - メンバー
  - スケジュール
  - グループ
  - 検索

**FR-012: レスポンシブデザイン**
- **優先度**: 高
- **説明**: 全デバイスで最適な表示を実現
- **詳細要件**:
  - デスクトップ（1920px以上）
  - ラップトップ（1024px - 1919px）
  - タブレット（768px - 1023px）
  - スマートフォン（320px - 767px）
  - ハンバーガーメニュー（モバイル）

**FR-013: パフォーマンス最適化**
- **優先度**: 高
- **説明**: 高速なページロード時間を実現
- **詳細要件**:
  - 画像の遅延読み込み（Lazy Loading）
  - 画像の最適化（WebP形式）
  - コード分割（Code Splitting）
  - キャッシング戦略
  - Core Web Vitals指標の達成
    - LCP（Largest Contentful Paint）: 2.5秒以内
    - FID（First Input Delay）: 100ms以内
    - CLS（Cumulative Layout Shift）: 0.1以内

### 2.2 将来の拡張機能

#### 2.2.1 ファンクラブ機能（Phase 2）

**FR-101: 会員登録・認証**
- 会員登録フォーム
- ログイン・ログアウト
- パスワードリセット
- メール認証

**FR-102: 会員限定コンテンツ**
- 限定ニュース・記事
- 限定写真・動画
- 先行チケット販売情報
- オンラインイベント

**FR-103: マイページ**
- プロフィール編集
- お気に入りメンバー登録
- スケジュールブックマーク
- 通知設定

---

## 3. 非機能要件

### 3.1 パフォーマンス要件

| ID | 要件 | 基準値 |
|----|------|--------|
| **NFR-001** | ページ初回表示時間 | 3秒以内 |
| **NFR-002** | ページ遷移時間 | 1秒以内 |
| **NFR-003** | 検索結果表示時間 | 2秒以内 |
| **NFR-004** | 画像読み込み時間 | 2秒以内（遅延読み込み） |
| **NFR-005** | 同時接続ユーザー数 | 10,000ユーザー |

### 3.2 可用性要件

| ID | 要件 | 基準値 |
|----|------|--------|
| **NFR-011** | システム稼働率 | 99.9%以上 |
| **NFR-012** | 計画メンテナンス | 月1回、深夜時間帯 |
| **NFR-013** | 障害復旧時間（RTO） | 4時間以内 |
| **NFR-014** | データ復旧ポイント（RPO） | 24時間以内 |

### 3.3 セキュリティ要件

| ID | 要件 | 詳細 |
|----|------|------|
| **NFR-021** | HTTPS通信 | 全ページでSSL/TLS暗号化通信 |
| **NFR-022** | CORS設定 | 適切なCross-Origin設定 |
| **NFR-023** | XSS対策 | 入力値のサニタイジング |
| **NFR-024** | SQLインジェクション対策 | パラメータ化クエリの使用 |
| **NFR-025** | CSRF対策 | トークン検証 |
| **NFR-026** | レート制限 | API呼び出しの制限（1分あたり100リクエスト） |

### 3.4 スケーラビリティ要件

| ID | 要件 | 詳細 |
|----|------|------|
| **NFR-031** | 水平スケーリング | Cloud Runの自動スケーリング対応 |
| **NFR-032** | データベース拡張性 | 読み取りレプリカ対応 |
| **NFR-033** | CDN活用 | 静的コンテンツのCDN配信 |
| **NFR-034** | キャッシュ戦略 | Redis等のキャッシュレイヤー導入 |

### 3.5 保守性要件

| ID | 要件 | 詳細 |
|----|------|------|
| **NFR-041** | コード品質 | ESLint、Prettierによるコード規約遵守 |
| **NFR-042** | テストカバレッジ | ユニットテスト80%以上 |
| **NFR-043** | ドキュメント | APIドキュメント、開発ガイド整備 |
| **NFR-044** | ログ管理 | Cloud Loggingによる集中ログ管理 |
| **NFR-045** | モニタリング | Cloud Monitoringによる監視 |

### 3.6 ユーザビリティ要件

| ID | 要件 | 詳細 |
|----|------|------|
| **NFR-051** | アクセシビリティ | WCAG 2.1 レベルAA準拠 |
| **NFR-052** | ブラウザ対応 | Chrome、Safari、Firefox、Edge（最新版および1つ前のバージョン） |
| **NFR-053** | 多言語対応 | 日本語のみ（Phase 1）、英語対応は将来検討 |
| **NFR-054** | SEO最適化 | メタタグ、構造化データ、サイトマップ |

---

## 4. 対象グループ一覧

### 4.1 現役グループ

| グループ名 | 結成日 | ステータス |
|-----------|--------|-----------|
| モーニング娘。'26 | 1997年 | 現役 |
| アンジュルム | 2009年（旧スマイレージ） | 現役 |
| Juice=Juice | 2013年 | 現役 |
| つばきファクトリー | 2015年 | 現役 |
| BEYOOOOONDS | 2018年 | 現役 |
| OCHA NORMA | 2021年 | 現役 |
| ロージークロニクル | 2022年 | 現役 |
| ハロプロ研修生 | - | 現役 |

### 4.2 OG・解散・休止グループ

| グループ名 | 結成日 | 解散日 | ステータス |
|-----------|--------|--------|-----------|
| Berryz工房 | 2004年 | 2015年 | 解散（無期限活動停止） |
| ℃-ute | 2005年 | 2017年 | 解散 |
| カントリー・ガールズ | 2014年 | 2019年 | 解散 |
| こぶしファクトリー | 2015年 | 2020年 | 解散 |

**注**: OGグループに関しても、歴史的な資料として完全な情報を提供する。

---

## 5. デザイン要件

### 5.1 デザインコンセプト

**キーワード**: ポップ、カラフル、エネルギッシュ、親しみやすい、洗練

### 5.2 カラーパレット

#### 5.2.1 プライマリカラー
- **メインカラー**: ビビッドピンク（#FF1493）- ハロープロジェクトのブランドカラー
- **サブカラー1**: スカイブルー（#00BFFF）
- **サブカラー2**: サニーイエロー（#FFD700）

#### 5.2.2 セカンダリカラー
- **アクセントカラー1**: ライムグリーン（#32CD32）
- **アクセントカラー2**: バイオレット（#9370DB）
- **アクセントカラー3**: オレンジ（#FF8C00）

#### 5.2.3 ニュートラルカラー
- **背景色**: ホワイト（#FFFFFF）、ライトグレー（#F5F5F5）
- **テキストカラー**: ダークグレー（#333333）
- **ボーダーカラー**: ミディアムグレー（#CCCCCC）

### 5.3 タイポグラフィ

#### 5.3.1 フォントファミリー
- **見出し**: "Noto Sans JP", sans-serif（Bold, 700以上）
- **本文**: "Noto Sans JP", sans-serif（Regular, 400）
- **強調**: "Noto Sans JP", sans-serif（Medium, 500）

#### 5.3.2 フォントサイズ
- **H1**: 48px（PC）、32px（SP）
- **H2**: 36px（PC）、28px（SP）
- **H3**: 28px（PC）、24px（SP）
- **H4**: 24px（PC）、20px（SP）
- **本文**: 16px（PC）、14px（SP）
- **キャプション**: 14px（PC）、12px（SP）

### 5.4 レイアウト

#### 5.4.1 グリッドシステム
- 12カラムグリッドシステム
- ガター幅: 24px（PC）、16px（SP）
- 最大コンテンツ幅: 1200px

#### 5.4.2 スペーシング
- **セクション間**: 80px（PC）、48px（SP）
- **要素間**: 24px（PC）、16px（SP）
- **コンポーネント内**: 16px（PC）、12px（SP）

### 5.5 アニメーション・インタラクション

#### 5.5.1 ページ遷移
- フェードイン・フェードアウト（300ms）
- スライドイン効果（400ms）

#### 5.5.2 スクロール連動
- パララックス効果（見出し、背景画像）
- フェードインアニメーション（スクロール時に要素が出現）
- プログレスバー（記事読み進み度）

#### 5.5.3 ホバーエフェクト
- カードホバー時: 影の強調、スケール拡大（1.05倍）、300ms
- ボタンホバー時: 背景色変化、300ms
- 画像ホバー時: オーバーレイ表示、300ms

#### 5.5.4 ローディング
- スケルトンスクリーン（コンテンツ読み込み時）
- スピナーアニメーション（データ取得時）

### 5.6 コンポーネント設計

#### 5.6.1 ボタン
- **プライマリボタン**: ピンク背景、ホワイトテキスト、角丸8px
- **セカンダリボタン**: ホワイト背景、ピンクボーダー、ピンクテキスト、角丸8px
- **テキストボタン**: 背景なし、ピンクテキスト

#### 5.6.2 カード
- ホワイト背景
- 影: 0 2px 8px rgba(0,0,0,0.1)
- 角丸: 12px
- ホバー時: 影の強調、上方向に移動（-4px）

#### 5.6.3 インプット
- ボーダー: 1px solid #CCCCCC
- 角丸: 8px
- フォーカス時: ピンクボーダー、影の追加

---

## 6. 技術要件

### 6.1 技術スタック

#### 6.1.1 フロントエンド

| 技術 | 用途 | バージョン |
|------|------|-----------|
| **Next.js** | Reactフレームワーク | 14.x 以上 |
| **React** | UIライブラリ | 18.x 以上 |
| **TypeScript** | 型安全性 | 5.x 以上 |
| **Tailwind CSS** | CSSフレームワーク | 3.x 以上 |
| **Framer Motion** | アニメーションライブラリ | 11.x 以上 |
| **React Query (TanStack Query)** | データフェッチング・キャッシュ | 5.x 以上 |
| **Axios** | HTTPクライアント | 1.x 以上 |
| **Zustand** | 状態管理（軽量） | 4.x 以上 |
| **React Hook Form** | フォーム管理 | 7.x 以上 |
| **date-fns** | 日付操作 | 3.x 以上 |

#### 6.1.2 バックエンド

| 技術 | 用途 | バージョン |
|------|------|-----------|
| **Node.js** | ランタイム | 20.x LTS |
| **Express.js** | Webフレームワーク | 4.x 以上 |
| **TypeScript** | 型安全性 | 5.x 以上 |
| **Prisma** | ORMツール | 5.x 以上 |
| **PostgreSQL** | データベース | 15.x 以上 |
| **Redis** | キャッシュ | 7.x 以上 |

#### 6.1.3 スクレイピング

| 技術 | 用途 | バージョン |
|------|------|-----------|
| **Puppeteer** | ブラウザ自動化 | 21.x 以上 |
| **Cheerio** | HTML解析 | 1.x 以上 |
| **node-cron** | スケジュール実行 | 3.x 以上 |

#### 6.1.4 インフラ・デプロイ

| 技術 | 用途 |
|------|------|
| **GCP Cloud Run** | コンテナホスティング |
| **Cloud SQL for PostgreSQL** | マネージドデータベース |
| **Cloud Storage** | 画像・静的ファイルストレージ |
| **Cloud CDN** | コンテンツ配信 |
| **Cloud Build** | CI/CD |
| **Cloud Logging** | ログ管理 |
| **Cloud Monitoring** | 監視・アラート |
| **Docker** | コンテナ化 |

#### 6.1.5 開発ツール

| 技術 | 用途 |
|------|------|
| **Git** | バージョン管理 |
| **GitHub** | コードホスティング |
| **ESLint** | コードリンター |
| **Prettier** | コードフォーマッター |
| **Jest** | ユニットテスト |
| **React Testing Library** | Reactコンポーネントテスト |
| **Playwright** | E2Eテスト |

### 6.2 アーキテクチャ

#### 6.2.1 システム構成

```
[クライアント（ブラウザ）]
        ↓
[Cloud CDN] ← 静的コンテンツ
        ↓
[Cloud Load Balancer]
        ↓
[Cloud Run（Next.js App）] ← [Cloud Storage（画像）]
        ↓
[Cloud SQL for PostgreSQL]
        ↓
[Redis（キャッシュ）]

[スクレイピングジョブ（Cloud Run Jobs）]
        ↓
[Cloud SQL for PostgreSQL]
```

#### 6.2.2 ディレクトリ構成

```
helloprojects/
├── frontend/                    # Next.jsフロントエンド
│   ├── src/
│   │   ├── app/                # App Router
│   │   │   ├── (main)/
│   │   │   │   ├── page.tsx   # トップページ
│   │   │   │   ├── news/       # ニュース
│   │   │   │   ├── members/    # メンバー
│   │   │   │   ├── schedule/   # スケジュール
│   │   │   │   └── groups/     # グループ
│   │   │   └── layout.tsx
│   │   ├── components/         # 共通コンポーネント
│   │   │   ├── common/
│   │   │   ├── layout/
│   │   │   ├── news/
│   │   │   ├── members/
│   │   │   └── schedule/
│   │   ├── lib/                # ユーティリティ・設定
│   │   ├── hooks/              # カスタムフック
│   │   ├── stores/             # 状態管理（Zustand）
│   │   ├── types/              # TypeScript型定義
│   │   └── styles/             # グローバルスタイル
│   ├── public/                 # 静的ファイル
│   └── package.json
│
├── backend/                     # Express.jsバックエンド
│   ├── src/
│   │   ├── controllers/        # コントローラー
│   │   ├── services/           # ビジネスロジック
│   │   ├── models/             # Prismaモデル
│   │   ├── routes/             # APIルート
│   │   ├── middlewares/        # ミドルウェア
│   │   ├── utils/              # ユーティリティ
│   │   └── index.ts            # エントリーポイント
│   ├── prisma/
│   │   └── schema.prisma       # Prismaスキーマ
│   └── package.json
│
├── scraper/                     # スクレイピングジョブ
│   ├── src/
│   │   ├── scrapers/           # スクレイパー実装
│   │   ├── parsers/            # HTMLパーサー
│   │   ├── jobs/               # ジョブスケジューラー
│   │   └── index.ts
│   └── package.json
│
├── docs/                        # ドキュメント
│   ├── requirements.md         # 本要件定義書
│   ├── api-spec.md             # API仕様書
│   └── setup.md                # セットアップガイド
│
├── docker-compose.yml           # ローカル開発環境
├── .gitignore
└── README.md
```

### 6.3 データベース設計（概要）

#### 6.3.1 主要テーブル

| テーブル名 | 説明 |
|-----------|------|
| **groups** | グループ情報 |
| **members** | メンバー情報 |
| **member_group_history** | メンバーのグループ所属履歴 |
| **news** | ニュース記事 |
| **news_groups** | ニュースとグループの関連 |
| **news_members** | ニュースとメンバーの関連 |
| **events** | イベント・スケジュール |
| **event_groups** | イベントとグループの関連 |
| **event_members** | イベントとメンバーの関連 |
| **discographies** | ディスコグラフィー（シングル・アルバム） |

#### 6.3.2 リレーション
- groups ↔ members（多対多、member_group_historyを介して）
- news ↔ groups（多対多）
- news ↔ members（多対多）
- events ↔ groups（多対多）
- events ↔ members（多対多）
- groups ↔ discographies（1対多）

### 6.4 API設計（概要）

#### 6.4.1 RESTful API エンドポイント

| メソッド | エンドポイント | 説明 |
|---------|---------------|------|
| GET | /api/news | ニュース一覧取得 |
| GET | /api/news/:id | ニュース詳細取得 |
| GET | /api/members | メンバー一覧取得 |
| GET | /api/members/:id | メンバー詳細取得 |
| GET | /api/groups | グループ一覧取得 |
| GET | /api/groups/:id | グループ詳細取得 |
| GET | /api/events | イベント一覧取得 |
| GET | /api/events/:id | イベント詳細取得 |
| GET | /api/search | 統合検索 |

#### 6.4.2 クエリパラメータ（共通）
- `page`: ページ番号（デフォルト: 1）
- `limit`: 1ページあたりの件数（デフォルト: 20）
- `sort`: ソート順（例: `date_desc`, `date_asc`, `name_asc`）
- `group_ids[]`: グループIDフィルター（複数指定可）
- `date_from`: 開始日フィルター（YYYY-MM-DD）
- `date_to`: 終了日フィルター（YYYY-MM-DD）

### 6.5 スクレイピング戦略

#### 6.5.1 対象サイト
- ハロープロジェクト公式サイト（https://www.helloproject.com/）
- 各グループ公式サイト
- 公式ブログ

#### 6.5.2 スクレイピング頻度
- ニュース: 1日4回（6時、12時、18時、24時）
- スケジュール: 1日2回（0時、12時）
- メンバー情報: 1週間に1回（毎週月曜0時）

#### 6.5.3 遵守事項
- robots.txt の確認と遵守
- レート制限（1秒あたり1リクエスト）
- User-Agentの適切な設定
- エラーハンドリング（タイムアウト、404など）
- 変更検知（前回取得データとの差分チェック）

### 6.6 デプロイ戦略

#### 6.6.1 環境

| 環境 | 用途 | URL |
|------|------|-----|
| **Development** | ローカル開発 | http://localhost:3000 |
| **Staging** | テスト・検証 | https://staging.helloprojects.jp |
| **Production** | 本番環境 | https://helloprojects.jp |

#### 6.6.2 CI/CDパイプライン

```
[GitHubへのPush/PR]
        ↓
[Cloud Build トリガー]
        ↓
[自動ビルド]
        ↓
[自動テスト実行]
        ↓
    ┌─────┴─────┐
    │             │
[Staging環境] [Production環境]
デプロイ（自動）  デプロイ（手動承認）
```

#### 6.6.3 デプロイフロー
1. **開発ブランチ（develop）へのマージ** → Staging環境に自動デプロイ
2. **mainブランチへのマージ** → Production環境に手動承認後デプロイ
3. **ロールバック** → 前バージョンのイメージに切り替え

---

## 7. データ要件

### 7.1 データソース

#### 7.1.1 一次ソース（スクレイピング対象）
- ハロープロジェクト公式サイト
- 各グループ公式サイト
- 公式ブログ

#### 7.1.2 初期データ
- グループ基本情報: 手動登録（CSV/JSONインポート）
- メンバー基本情報: 手動登録（CSV/JSONインポート）
- 歴史的データ: 公開されているアーカイブ情報を参照

### 7.2 データ更新頻度

| データ種別 | 更新頻度 | 更新方法 |
|-----------|---------|---------|
| ニュース | 1日4回 | 自動スクレイピング |
| スケジュール | 1日2回 | 自動スクレイピング |
| メンバー情報 | 週1回 | 自動スクレイピング |
| グループ情報 | 月1回 | 手動更新 |
| ディスコグラフィー | 手動 | 手動更新 |

### 7.3 データ保持期間

| データ種別 | 保持期間 |
|-----------|---------|
| ニュース | 無期限（全履歴保持） |
| スケジュール | 過去3年分 |
| メンバー情報 | 無期限（全履歴保持） |
| ログデータ | 90日間 |

---

## 8. 制約事項

### 8.1 技術的制約
- Cloud Runの制約
  - リクエストタイムアウト: 最大60分
  - メモリ上限: 最大32GB
  - CPU上限: 最大8vCPU
- スクレイピング対象サイトの構造変更によるメンテナンス発生

### 8.2 法的制約
- 著作権法の遵守
  - 公式サイトからのデータ取得は事実情報のみ
  - 画像は公式サイトへのリンク、またはAPI経由で提供されるもののみ使用
- 個人情報保護法の遵守
  - 公開されている情報のみを掲載
  - 会員機能（Phase 2）では適切なプライバシーポリシーの策定

### 8.3 予算制約
- GCP料金の最適化
  - Cloud Runのリクエストベース課金
  - Cloud SQLのインスタンスサイズ最適化
  - Cloud Storageの適切な利用

### 8.4 スケジュール制約
- Phase 1（MVP）: 3ヶ月
- Phase 2（ファンクラブ機能）: 追加3ヶ月

---

## 9. 前提条件

### 9.1 プロジェクト実施の前提
- 開発チームの構成: フロントエンド1名、バックエンド1名、デザイナー1名
- 公式サイトからのスクレイピングが技術的・法的に可能であること
- GCPアカウントと適切な予算が確保されていること

### 9.2 ユーザーの前提
- インターネット接続環境があること
- 対応ブラウザを使用していること
- JavaScript が有効になっていること

---

## 10. リスク管理

### 10.1 リスク一覧

| リスクID | リスク内容 | 影響度 | 発生確率 | 対策 |
|---------|-----------|--------|---------|------|
| **R-001** | スクレイピング対象サイトの構造変更 | 高 | 高 | 定期的な監視、柔軟なパーサー設計、手動フォールバック |
| **R-002** | 著作権・法的問題 | 高 | 中 | 事前の法的確認、利用規約遵守 |
| **R-003** | パフォーマンス低下 | 中 | 中 | キャッシュ戦略、CDN活用、スケーリング設計 |
| **R-004** | 開発スケジュール遅延 | 中 | 中 | アジャイル開発、MVPの明確化 |
| **R-005** | セキュリティ脆弱性 | 高 | 低 | セキュリティテスト、定期的なアップデート |
| **R-006** | GCP料金超過 | 中 | 低 | 予算アラート設定、コスト最適化 |

---

## 11. 成功基準

### 11.1 KPI（重要業績評価指標）

#### 11.1.1 Phase 1（MVP）リリース後3ヶ月

| 指標 | 目標値 |
|------|--------|
| **月間ユニークユーザー数** | 10,000人 |
| **月間ページビュー数** | 50,000PV |
| **平均セッション時間** | 3分以上 |
| **直帰率** | 60%以下 |
| **ページ表示速度（LCP）** | 2.5秒以内 |
| **モバイル利用率** | 60%以上 |

#### 11.1.2 Phase 2（ファンクラブ機能）リリース後3ヶ月

| 指標 | 目標値 |
|------|--------|
| **会員登録数** | 1,000人 |
| **月間アクティブユーザー率** | 50%以上 |
| **会員の平均セッション時間** | 5分以上 |

### 11.2 品質基準

| 指標 | 基準値 |
|------|--------|
| **バグ発生率** | リリース後1ヶ月で10件以下（重大バグは0件） |
| **テストカバレッジ** | 80%以上 |
| **稼働率** | 99.9%以上 |
| **セキュリティ脆弱性** | 0件（CVSS 7.0以上） |

---

## 12. プロジェクトスケジュール（概要）

### 12.1 Phase 1（MVP）: 3ヶ月

#### Month 1: 設計・環境構築
- Week 1-2: 詳細設計、データベース設計、API設計
- Week 3-4: 開発環境構築、デザインシステム構築、スクレイピング実装

#### Month 2: 開発
- Week 5-6: フロントエンド開発（ニュース、メンバー）
- Week 7-8: フロントエンド開発（スケジュール、検索）、バックエンドAPI開発

#### Month 3: テスト・リリース
- Week 9-10: 統合テスト、E2Eテスト、パフォーマンステスト
- Week 11: ステージング環境での最終確認、バグ修正
- Week 12: 本番環境リリース、モニタリング

### 12.2 Phase 2（ファンクラブ機能）: 追加3ヶ月

- Month 4: 会員機能設計・開発
- Month 5: 限定コンテンツ機能開発
- Month 6: テスト・リリース

---

## 13. ステークホルダー

| 役割 | 責任 |
|------|------|
| **プロジェクトオーナー** | 最終意思決定、予算承認 |
| **プロジェクトマネージャー** | スケジュール管理、リソース調整 |
| **フロントエンドエンジニア** | フロントエンド開発、UI実装 |
| **バックエンドエンジニア** | バックエンド開発、API実装、スクレイピング |
| **デザイナー** | UI/UXデザイン、ビジュアルデザイン |
| **QAエンジニア** | テスト計画、テスト実施 |
| **インフラエンジニア** | GCP環境構築、運用保守 |

---

## 14. 用語集

| 用語 | 説明 |
|------|------|
| **ハロープロジェクト（Hello! Project）** | つんく♂がプロデュースする女性アイドルグループの総称 |
| **OG** | Original Generationの略。卒業・解散したグループやメンバー |
| **研修生** | ハロープロジェクトの研修生制度に所属するメンバー |
| **MVP** | Minimum Viable Product。最小限の機能を持つ製品 |
| **Cloud Run** | Google Cloudのコンテナベースのサーバーレスプラットフォーム |
| **SSR** | Server-Side Rendering。サーバー側でHTMLを生成 |
| **CSR** | Client-Side Rendering。クライアント側でHTMLを生成 |
| **ISR** | Incremental Static Regeneration。静的ページの段階的な再生成 |

---

## 15. 参考資料

### 15.1 外部リンク
- ハロープロジェクト公式サイト: https://www.helloproject.com/
- GCP Cloud Run ドキュメント: https://cloud.google.com/run/docs
- Next.js ドキュメント: https://nextjs.org/docs

### 15.2 関連ドキュメント
- API仕様書（docs/api-spec.md）
- データベース設計書（docs/database-design.md）
- セットアップガイド（docs/setup.md）

---

## 16. 承認

| 役割 | 氏名 | 承認日 | 署名 |
|------|------|--------|------|
| プロジェクトオーナー |  | 2026-01-14 |  |
| プロジェクトマネージャー |  | 2026-01-14 |  |

---

## 変更履歴

| バージョン | 日付 | 変更者 | 変更内容 |
|-----------|------|--------|---------|
| 1.0.0 | 2026-01-14 | Claude | 初版作成 |

---

**文書管理情報**
- ファイル名: requirements.md
- 最終更新日: 2026-01-14
- 文書ステータス: 承認待ち
